<script>
   var questions = [
    {
        id: 1,
        question: 'Wie groß ist Dein Unternehmen?',
        level: 1,
        //msgClou: "Mithilfe der Anzahl Ihrer Arbeitsplätze, können wir eine Empfehlung bzgl. Ihrer Cloud-Variante aussprechen.",
        options: [
            {
                id: 1,
                text: "1-50 Mitarbeiter"
            },
            {
                id: 2,
                text: "51-200 Mitarbeiter"
            },
            {
                id: 3,
                text: "201-1000 Mitarbeiter"
            },
            {
                id: 4,
                text: "1000+ Mitarbeiter"
            }
        ],
        role: []

    },
    {
        id: 2,
        question: 'In welcher Branche ist Dein Unternehmen tätig?',
        level: 1,
        // msgClou: "Mithilfe der Anzahl Ihrer Arbeitsplätze, können wir eine Empfehlung bzgl. Ihrer Cloud-Variante aussprechen.",
        options: [
            {
                id: 1,
                text: "Küchenhandel"
            },
            {
                id: 2,
                text: "Möbelhandel"
            },
            {
                id: 3,
                text: "Sanitärgroßhandel"
            },
            {
                id: 4,
                text: "Sonstiges"
            },
            {
                id: 5,
                text: "Baumaschinenhandel und -vermietung"
            }
        ],
        role: []

    },
    {
        id: 3,
        question: 'Was trifft auf Dich zu?',
        level: 1,
        // msgClou: "Mithilfe der Anzahl Ihrer Arbeitsplätze, können wir eine Empfehlung bzgl. Ihrer Cloud-Variante aussprechen.",
        options: [
            {
                id: 1,
                text: "Geschäftsführer"
            },
            {
                id: 2,
                text: "IT-Leiter"
            },
            {
                id: 3,
                text: "IT-Mitarbeiter"
            },
            {
                id: 4,
                text: "Organisationsleiter"
            }
        ],
        role: []

    },
    {
        id: 4,
        question: 'Benutzt Du bereits Cloud Dienste?',
        level: 1,
        msgClou: "Mithilfe der Anzahl Ihrer Arbeitsplätze, können wir eine Empfehlung bzgl. Ihrer Cloud-Variante aussprechen.",
        options: [
            {
                id: 1,
                text: "Ja"
            },
            {
                id: 2,
                text: "Nein"
            },
            {
                id: 3,
                text: "Unbekannt"
            }
        ],
        role: []

    },
    {
        id: 5,
        question: 'Was ist Dein primäres Ziel?',
        level: 1,
        options: [
            {
                id: 1,
                text: "Skalierbarkeit"
            },
            {
                id: 2,
                text: "Höhere Verfügbarkeit"
            },
            {
                id: 3,
                text: "Rundumsorglos-Betreuung"
            },
            {
                id: 4,
                text: "Kosteneinsparung"
            }
        ],
        role: []

    },
    {
        id: 6,
        question: 'Verfügst Du über eine Dokumentation der IT-Infrastruktur?',
        level: 1,
        msgClou: "Mithilfe der Anzahl Ihrer Arbeitsplätze, können wir eine Empfehlung bzgl. Ihrer Cloud-Variante aussprechen.",
        options: [
            {
                id: 1,
                text: "Ja"
            },
            {
                id: 2,
                text: "Nein"
            },
            {
                id: 3,
                text: "Unbekannt"
            }
        ],
        role: []

    },
    {
        id: 7,
        question: 'Hast Du eine eigene IT Abteilung?',
        level: 1,
        options: [
            {
                id: 1,
                text: "Ja"
            },
            {
                id: 2,
                text: "Nein"
            }
        ],
        role: []

    },
    {
        id: 8,
        question: 'Betreibst Du aktuell ein Patchmanagement?',
        level: 2,
        msgClou: "Mithilfe der Anzahl Ihrer Arbeitsplätze, können wir eine Empfehlung bzgl. Ihrer Cloud-Variante aussprechen.",
        options: [
            {
                id: 1,
                text: "Ja"
            },
            {
                id: 2,
                text: "Nein"
            },
            {
                id: 3,
                text: "Unbekannt"
            }
        ],
        role: [2, 3]

    },
    {
        id: 9,
        question: 'Bis wann möchtest Du das Projekt umsetzen?',
        level: 2,
        options: [
            {
                id: 1,
                text: "< 1 Monat"
            },
            {
                id: 2,
                text: "< 3 Monate"
            },
            {
                id: 3,
                text: "< 6 Monate"
            },
            {
                id: 4,
                text: "< 12 Monate"
            }
        ],
        role: [1, 2, 3]

    },
    {
        id: 10,
        question: 'Wieviele Benutzer arbeiten auf dem aktuellen System?',
        level: 2,
        options: [
            {
                id: 1,
                text: "1-5 MA"
            },
            {
                id: 2,
                text: "6-50 MA"
            },
            {
                id: 3,
                text: "51-200 MA"
            },
            {
                id: 4,
                text: "201-1000 MA"
            }
        ],
        role: [2, 3]

    },
    {
        id: 11,
        question: 'Welche Programme nutzt Du aktuell ?',
        level: 2,
        options: [
            {
                id: 1,
                text: "Office 365, Adobe Photoshop"
            },
            {
                id: 2,
                text: "Ecoro, Outlook, sfirm, furnplan, Office"
            },
            {
                id: 3,
                text: "ERP, Teams, Surfen"
            }
        ],
        role: []

    },
    {
        id: 12,
        question: 'Wieviele virtuelle Instanzen betreibst Du aktuell?',
        level: 2,
        options: [
            {
                id: 1,
                text: "< 5"
            },
            {
                id: 2,
                text: "< 20"
            },
            {
                id: 3,
                text: "> 50"
            }
        ],
        role: [2, 3]

    },
    {
        id: 13,
        question: 'Welche Betriebssysteme sind im Einsatz?',
        level: 2,
        options: [
            {
                id: 1,
                text: "Windows Server 2003"
            },
            {
                id: 2,
                text: "Windows Server 2008/R2"
            },
            {
                id: 3,
                text: "Windows Server 2012"
            },
            {
                id: 4,
                text: "Windows Server 2016"
            },
            {
                id: 5,
                text: "Desktopbetriebssysteme in der Virtualisierung"
            }
        ],
        role: [2, 3]

    }
    ,
    {
        id: 14,
        question: 'Welchen Ressourcenumpfang hat die IT-Infrastruktur (CPU/RAM/Storage)',
        level: 2,
        options: [
            {
                id: 1,
                text: "virtuelle CPU-Kerne"
            },
            {
                id: 2,
                text: "RAM in GB"
            },
            {
                id: 3,
                text: "HDD in GB"
            }
        ],
        role: [2, 3]

    },
    {
        id: 15,
        question: 'Benötigst Du alle angebenen Instanzen in der Cloud?',
        level: 2,
        options: [
            {
                id: 1,
                text: "Ja"
            },
            {
                id: 2,
                text: "Nein"
            }
        ],
        role: [2, 3]

    },
    {
        id: 16,
        question: 'Wieviele Remote-User hast Du?',
        level: 2,
        options: [
            {
                id: 1,
                text: "< 50"
            },
            {
                id: 2,
                text: "< 350"
            },
            {
                id: 3,
                text: "> 350"
            }
        ],
        role: [2, 3]

    },
    {
        id: 17,
        question: 'Wie oft wünschst Du Dir eine Datensicherung?',
        level: 2,
        options: [
            {
                id: 1,
                text: "7 Tage"
            },
            {
                id: 2,
                text: "14 Tage"
            },
            {
                id: 3,
                text: "7 Tage & Monatsbackup"
            },
            {
                id: 4,
                text: "14 Tage & Monatsbackup"
            },
            {
                id: 5,
                text: "individuelle Anfrage"
            }
        ],
        role: []

    }

]
var welcomeText = "Hey, ich in Clou - ich bin neu hier. Heute ist mein erster Tag und ich möchte euch und eure Bedürfnisse besser kennenlernen.";


function shuffle(array) {
    let currentIndex = array.length, randomIndex;

    // While there remain elements to shuffle...
    while (currentIndex != 0) {

        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;

        // And swap it with the current element.
        [array[currentIndex], array[randomIndex]] = [
            array[randomIndex], array[currentIndex]];
    }

    return array;
}

function populateTemplate(item,index) {
    var template = '<div id="step' + index +  '" class="row">;' +
        '<div class="col col-5 col-m-12">' +
        '<div class="step_text step_text-left">' +
        '<div class="step_number">' + index + '</div>' +
        '<div class="step_line"></div>' +
        '<h3 class="h3">' + item.question + '<br></h3>' +
        
        '</div>' +
        '</div>' +
        '<div class="col col-7 col-m-12">' +
        '<div class="step_fields"><label class="radio-button-field radiobutton_33 w-radio">' +
        '<div class="w-form-formradioinput w-form-formradioinput--inputType-custom radio-button w-radio-input">' +
        '</div><input type="radio" name="mitarbeiter" id="5-Mitarbeiter" value="<5 Mitarbeiter" data-name="mitarbeiter" style="opacity:0;position:absolute;z-index:-1">' +
        '<div class="radiochecked"><img loading="lazy" src="https://assets.website-files.com/622cdecdbc5913a9b019a3ab/622cdecdbc5913ffd319a3df_person-blue.svg" alt="" class="radio_icon"></div>' +
        '<div class="radiounchecked"><img loading="lazy" src="https://assets.website-files.com/622cdecdbc5913a9b019a3ab/622cdecdbc5913ec9719a3c5_person.svg" alt="" class="radio_icon"></div></label>' +
        '<span class="radio-button-label w-form-label" for="5-Mitarbeiter">&lt;5 Mitarbeiter</span>' +
        '<label class="radio-button-field radiobutton_33 w-radio">' +
        '<div class="w-form-formradioinput w-form-formradioinput--inputType-custom radio-button w-radio-input"></div>' +
        '<input type="radio" name="mitarbeiter" id="10-200-Mitarbeiter" value="10-200 Mitarbeiter" data-name="mitarbeiter" style="opacity:0;position:absolute;z-index:-1">' +
        '<div class="radiochecked">' +
        '<img loading="lazy" src="https://assets.website-files.com/622cdecdbc5913a9b019a3ab/622cdecdbc5913a1cf19a3e0_small-group-blue.svg" alt="" class="radio_icon"></div>' +
        '<div class="radiounchecked">' +
        '<img loading="lazy" src="https://assets.website-files.com/622cdecdbc5913a9b019a3ab/622cdecdbc591380f619a3c6_small-group.svg" alt="" class="radio_icon"></div>' +
        '<span class="radio-button-label w-form-label" for="10-200-Mitarbeiter">10-200 Mitarbeiter</span></label>' +
        '<label class="radio-button-field radiobutton_33 w-radio">' +
        '<div class="w-form-formradioinput w-form-formradioinput--inputType-custom radio-button w-radio-input w--redirected-checked"></div>' +
        '<input type="radio" name="mitarbeiter" id="200-Mitarbeiter" value=">200 Mitarbeiter" data-name="mitarbeiter" style="opacity:0;position:absolute;z-index:-1">' +
        '<div class="radiochecked"><img loading="lazy" src="https://assets.website-files.com/622cdecdbc5913a9b019a3ab/622cdecdbc5913c38a19a3e1_big-group-blue.svg" alt="" class="radio_icon"></div>' +
        '<div class="radiounchecked"><img loading="lazy" src="https://assets.website-files.com/622cdecdbc5913a9b019a3ab/622cdecdbc59130e5219a3c7_big-group.svg" alt="" class="radio_icon"></div>' +
        '<span class="radio-button-label w-form-label" for="200-Mitarbeiter">&gt;200 Mitarbeiter</span></label>' +
        '</div>' +
        '</div>' +
        '</div>'
    return template;
}

function randomIntFromInterval(min, max) { // min and max included 
    return Math.floor(Math.random() * (max - min + 1) + min)
}



var currentStep = 0;
var curretnStepLvlTwo = 0;
var persona = -1;

var levelOneQuestions = shuffle(questions.filter((q) => q.level === 1));
var levelTwoQuestionPersona;

$('#section-container').append(populateTemplate(levelOneQuestions[currentStep],currentStep))
currentStep = currentStep + 1;

$('.radio-button-field').on('click', function () {
    currentStep = currentStep + 1;
    var nextSection = levelOneQuestions[currentStep];
    if (nextSection.id === 3) {
        persona = nextSection.id;
    }

    if (currentStep < 7) {
        $('#section-container').append(populateTemplate(nextSection),currentStep)
        
        var offset = $("#step" + nextStep).offset().top;
        $('html, body').animate({
            scrollTop: offset
        }, 1000);
    }
    else {
        var numberOfSections = persona === 4 ? 2 : randomIntFromInterval(2, 4)
        if (persona === -1) {
            levelTwoQuestionPersona = shuffle(questions.filter((q) => q.level === 2 && (q.role.indexOf(persona) > -1 || q.role.length === 0))).slice(0, numberOfSections);
        }
        $('#section-container').append(populateTemplate(levelTwoQuestionPersona[curretnStepLvlTwo],currentStep))
        
        var offset = $("#step" + nextStep).offset().top;
        $('html, body').animate({
            scrollTop: offset
        }, 1000);
        curretnStepLvlTwo = curretnStepLvlTwo + 1;
    }
});
</script>
